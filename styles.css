:root {
  --bg: #1a1a2e;
  --panel-bg: #21213b;
  --text-color: #e0e0f0;
  --muted-text: #a0a0c0;

  --home-color: #00bcd4; /* Ciano para time da casa */
  --away-color: #ff9800; /* Laranja para time visitante */

  --btn-default-bg: #333;

  --btn-fin-bg: #4caf50; /* Verde intenso para Finalizações */
  --btn-entry-bg: #9c27b0; /* Roxo para Entradas */

  --btn-gol-bg: #e91e63; /* Rosa para Gol */
  --btn-esc-bg: #2196f3; /* Azul para ESC */
  --btn-falta-bg: #f44336; /* Vermelho para FL */

  --half-btn-active-bg: #ffc107; /* Amarelo para half ativo */
  --half-btn-text: #21213b;

  --primary-action-bg: #00e676; /* Verde neon */
  --undo-action-bg: #607d8b; /* Cinza azulado */
  --reset-action-bg: #f44336; /* Vermelho para reset */
  --stats-action-bg: #673ab7; /* Roxo escuro para stats */
  --config-action-bg: #795548; /* Marrom para configuração */
  --export-action-bg: #009688; /* Verde água para exportar */

  --gap: 8px;
  --radius: 10px;
  --shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* Base Reset & Globals */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body { margin: 0; padding: 0; height: 100%; }
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif;
  color: var(--text-color);
  background-color: var(--bg);
  overflow: hidden; /* Evita rolagem no body */
}

.app-container {
  height: 100dvh; /* Altura fixa da viewport */
  display: flex;
  flex-direction: column;
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* Game Header (Top Bar) */
.game-header {
  background-color: var(--panel-bg);
  padding: var(--gap);
  border-bottom: 1px solid rgba(255,255,255,0.1);
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  align-items: center;
  flex-shrink: 0; /* Não encolhe */
}

.half-controls {
  display: flex;
  gap: calc(var(--gap) / 2);
  width: 100%;
  justify-content: center;
}

.half-btn {
  background-color: var(--btn-default-bg);
  color: var(--text-color);
  font-size: 0.75rem;
  padding: 6px 8px;
  border-radius: 6px;
  flex-grow: 1;
  max-width: 100px;
  min-height: 35px;
}
.half-btn.active {
  background-color: var(--half-btn-active-bg);
  color: var(--half-btn-text);
  box-shadow: var(--shadow);
}

.game-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  max-width: 350px;
  font-size: 1.2rem;
  font-weight: 700;
}

.current-half-display {
  color: var(--half-btn-active-bg);
  min-width: 40px;
  text-align: left;
  font-size: 1rem;
}

.score-display {
  flex-grow: 1;
  text-align: center;
  font-size: 1.8rem;
  font-weight: 900;
  letter-spacing: 0.05em;
}

.timer-display {
  font-size: 1.2rem;
  font-weight: 800;
  letter-spacing: 0.05em;
  font-variant-numeric: tabular-nums;
  min-width: 60px;
  text-align: right;
}

/* Main Layout */
.main-layout {
  flex-grow: 1;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--gap);
  padding: var(--gap);
  overflow: hidden; /* Remove rolagem */
  min-height: 0; /* Permite que o grid encolha */
}

/* Team Column */
.team-column {
  background-color: var(--panel-bg);
  border-radius: var(--radius);
  padding: var(--gap);
  display: grid;
  grid-template-rows: auto 1fr 1fr auto; /* Header, Fin, Ent, Second Column */
  gap: var(--gap);
  min-height: 0; /* Permite que encolha */
}

.team-name {
  text-align: center;
  font-size: 1.1rem;
  font-weight: 700;
  margin: 0;
  padding-bottom: var(--gap);
  border-bottom: 1px solid rgba(255,255,255,0.1);
  grid-row: 1;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
.team-column.home .team-name { color: var(--home-color); }
.team-column.away .team-name { color: var(--away-color); }

/* Action Group */
.action-group {
  display: flex;
  flex-direction: column;
  gap: calc(var(--gap) / 2);
  min-height: 0; /* Permite encolhimento */
}

.group-title {
  margin: 0;
  font-size: 0.7rem;
  color: var(--muted-text);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-align: center;
}

/* Segunda coluna (GOL + ESC/FL) */
.second-column {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  grid-row: 4;
}

/* Buttons Base Style */
.btn {
  border: none;
  border-radius: var(--radius);
  color: var(--text-color);
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.1s ease, background-color 0.2s ease;
  box-shadow: var(--shadow);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  padding: var(--gap);
  background-color: var(--btn-default-bg);
  font-size: 0.9rem;
}
.btn:active { transform: scale(0.98); }

/* Event Buttons */
.event-btn {
  min-height: 50px; /* Altura reduzida para mobile */
}

/* Text Responsive (Desktop vs Mobile) */
.btn-text-short { display: none; } /* Escondido por padrão */
.btn-text-full { display: inline; } /* Visível por padrão */

/* Field Grid Buttons */
.field-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 4px; /* Gap muito pequeno */
  flex-grow: 1;
  min-height: 0;
}

.field-zone-btn {
  min-height: 45px;
  font-size: 0.8rem;
  padding: 4px;
}

.action-group:nth-of-type(1) .field-zone-btn { background-color: var(--btn-fin-bg); }
.action-group:nth-of-type(2) .field-zone-btn { background-color: var(--btn-entry-bg); }

/* Gol Buttons */
.gol-btn {
  background-color: var(--btn-gol-bg);
  min-height: 50px;
  font-size: 1rem;
  font-weight: 700;
}

/* Side Action Buttons */
.side-actions-group {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: calc(var(--gap) / 2);
}
.side-btn {
  min-height: 45px;
  font-size: 0.8rem;
}
.esc-of, .esc-def { background-color: var(--btn-esc-bg); }
.falta-of, .falta-def { background-color: var(--btn-falta-bg); }

/* Count Badges */
.count-badge {
  position: absolute;
  top: 4px;
  right: 4px;
  background-color: rgba(0,0,0,0.6);
  padding: 2px 6px;
  border-radius: 12px;
  font-size: 0.7rem;
  font-weight: 700;
  min-width: 20px;
  text-align: center;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Bottom Bar */
.bottom-bar {
  background-color: var(--panel-bg);
  padding: var(--gap);
  display: flex;
  justify-content: center;
  align-items: center;
  border-top: 1px solid rgba(255,255,255,0.1);
  flex-shrink: 0; /* Não encolhe */
}

.bottom-buttons {
  display: flex;
  gap: var(--gap);
  width: 100%;
  max-width: 500px;
}

.action-btn {
  min-height: 45px;
  font-size: 0.9rem;
  flex-grow: 1;
  min-width: 80px;
}
.action-btn.primary { background-color: var(--primary-action-bg); color: #1a1a2e; }
.action-btn.undo { background-color: var(--undo-action-bg); }
.action-btn.reset { background-color: var(--reset-action-bg); }
.action-btn.stats { background-color: var(--stats-action-bg); }
.action-btn.config { background-color: var(--config-action-bg); }
.action-btn.export { background-color: var(--export-action-bg); }

/* Modal Styles */
.modal {
  display: none;
  position: fixed;
  z-index: 100;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.9);
  padding: var(--gap);
}

.modal-content {
  background-color: var(--panel-bg);
  margin: var(--gap) auto;
  padding: var(--gap);
  border-radius: var(--radius);
  width: 90%;
  max-width: 500px;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: var(--shadow);
  position: relative;
  display: flex;
  flex-direction: column;
  gap: var(--gap);
}

.close-button {
  color: var(--muted-text);
  font-size: 1.5rem;
  font-weight: bold;
  position: absolute;
  top: 10px;
  right: 15px;
  cursor: pointer;
}
.close-button:hover { color: var(--text-color); }

.modal-content h2 {
  text-align: center;
  color: var(--home-color);
  margin-top: 0;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  padding-bottom: var(--gap);
}

/* Team Config Modal Styles */
.team-config-modal {
  max-width: 450px;
  max-height: 70vh;
}

.team-config-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.team-input-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.team-input-group label {
  font-weight: 600;
  color: var(--text-color);
  font-size: 1rem;
}

.team-input {
  padding: 12px;
  border: 2px solid var(--btn-default-bg);
  border-radius: var(--radius);
  background-color: var(--bg);
  color: var(--text-color);
  font-size: 1rem;
  font-weight: 500;
  transition: border-color 0.2s ease;
}

.team-input:focus {
  outline: none;
  border-color: var(--home-color);
  background-color: rgba(0, 188, 212, 0.05);
}

.input-hint {
  font-size: 0.8rem;
  color: var(--muted-text);
  font-style: italic;
}

.config-buttons {
  display: flex;
  gap: var(--gap);
  margin-top: 10px;
}

.config-btn {
  flex-grow: 1;
  min-height: 45px;
  font-size: 0.9rem;
  font-weight: 600;
}

.config-btn.save { 
  background-color: var(--primary-action-bg); 
  color: #1a1a2e; 
}

.config-btn.reset { 
  background-color: var(--reset-action-bg); 
}

.config-info {
  background-color: var(--bg);
  padding: 12px;
  border-radius: var(--radius);
  border-left: 4px solid var(--home-color);
  margin-top: 10px;
}

.config-info p {
  margin: 0;
  font-size: 0.9rem;
  color: var(--muted-text);
}

.stats-preview {
  background-color: var(--bg);
  padding: var(--gap);
  border-radius: var(--radius);
  text-align: center;
}

.stats-summary {
  list-style: none;
  padding: 0;
  margin: var(--gap) 0 0 0;
}
.stats-summary li {
  padding: 4px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}

.stats-export-options {
  display: flex;
  gap: var(--gap);
  justify-content: center;
}

/* Responsividade para Mobile */
@media (max-width: 768px) {
  :root {
    --gap: 6px;
    --radius: 8px;
  }
  
  /* Mostra texto curto e esconde texto longo */
  .btn-text-full { display: none; }
  .btn-text-short { display: inline; }
  
  /* Ajustes no cabeçalho */
  .game-info {
    font-size: 1rem;
  }
  .score-display {
    font-size: 1.5rem;
  }
  .timer-display {
    font-size: 1rem;
  }
  .current-half-display {
    font-size: 0.9rem;
  }
  
  /* Ajustes nos botões */
  .event-btn {
    min-height: 40px;
    font-size: 0.75rem;
  }
  .field-zone-btn {
    min-height: 38px;
    font-size: 0.7rem;
  }
  .gol-btn {
    min-height: 42px;
    font-size: 0.85rem;
  }
  .side-btn {
    min-height: 38px;
    font-size: 0.7rem;
  }
  
  /* Badges menores */
  .count-badge {
    padding: 1px 4px;
    font-size: 0.6rem;
    min-width: 16px;
  }
  
  /* Bottom bar */
  .action-btn {
    min-height: 40px;
    font-size: 0.75rem;
    min-width: 60px;
  }
  
  /* Team names menores */
  .team-name {
    font-size: 1rem;
  }
  .group-title {
    font-size: 0.6rem;
  }

  /* Team config modal mobile */
  .team-config-modal {
    width: 95%;
    max-height: 85vh;
  }

  .config-buttons {
    flex-direction: column;
  }
}

@media (max-width: 480px) {
  .half-controls {
    flex-wrap: wrap;
  }
  .half-btn {
    font-size: 0.65rem;
    padding: 4px 6px;
    min-height: 30px;
  }
  
  .modal-content {
    width: 95%;
    max-height: 85vh;
  }
  
  .stats-export-options {
    flex-direction: column;
  }

  .team-input {
    padding: 10px;
    font-size: 0.9rem;
  }
}

/* Landscape Mobile Optimization */
@media (max-width: 896px) and (orientation: landscape) {
  .game-header {
    padding: 4px var(--gap);
  }
  .half-btn {
    font-size: 0.6rem;
    padding: 2px 4px;
    min-height: 25px;
  }
  .game-info {
    font-size: 0.9rem;
  }
  .score-display {
    font-size: 1.3rem;
  }
}